# TODO List 项目说明文档

## 1. 技术选型

### 前端 (Frontend)
- **语言**：TypeScript
    - **理由**：提供静态类型检查，增强代码健壮性，特别是对于 API 接口数据结构（TodoItem）的定义，便于维护。
- **框架**：Vue 3
    - **理由**：Vue 3 的组合式 API 逻辑复用性强，代码组织更清晰；Script Setup 语法糖极大地减少了样板代码。
- **UI 组件库**：Element Plus
    - **理由**：成熟的 Vue 3 组件库，提供了现成的 Dialog、DatePicker、Form 等高质量组件，能快速构建简约明了的界面。
- **构建工具**：Vite
    - **理由**：极速的冷启动和热更新体验。

### 后端 (Backend)
- **语言**：Java 21
    - **理由**：本来是打算用 Java8 的，但是感觉做新的项目可以尝试一下高版本，为后续集成 AI 做好准备。
- **框架**：Spring Boot 3
    - **理由**：Java 生态事实标准，开箱即用，自动配置大大降低了开发门槛。
- **ORM 框架**：MyBatis Plus
    - **理由**：在 MyBatis 基础上只做增强不做改变，内置通用 CRUD，极大提高了单表操作的开发效率。
- **数据库**：MySQL 8
    - **理由**：关系型数据库标准，数据一致性好，支持复杂的排序和查询逻辑。

---

## 2. 项目结构设计

- 整体架构说明：本项目采用前后端分离架构，前后端代码位于不同仓库下。

- 目录结构与模块职责说明

```text
DOC.md                # 项目核心说明文档
todo-list-frontend/             # 前端项目
├── src/
│   ├── api/          # Axios 封装与接口定义
│   ├── components/   # 业务组件 (TodoInput, TodoItem)
│   ├── types/        # TypeScript 类型定义
│   └── views/        # 页面视图 (TodoList)
└── ...

DOC.md                # 项目核心说明文档
todo-list-backend/              # 后端项目
├── src/main/java/com/example/todo/
│   ├── config/       # 跨域配置 (CorsConfig)
│   ├── controller/   # 控制层
│   ├── data/         # 通用返回结果封装 (BaseResult, Request, Response)
│   ├── entity/       # 实体类 (对应 DB 表)
│   ├── mapper/       # MyBatis Plus 映射接口
│   ├── service/      # 业务逻辑层
│   ├── task/         # 定时任务 (邮件提醒)
│   └── utils/        # 工具类
└── ...
```
## 3. 需求细节与决策
- 是否必填处理：标题为必填项，其他项允许不填。不过也有特殊情况，如果填写了提醒时间，则必须填写邮箱和截止日期，均由前端控制。
- 空值处理：除了描述字段的空值以空字符串处理，其他情况前端发送 null 至后端，而非空字符串，避免序列化异常。
- 已完成的任务显示：已完成的任务以高透明度显示在列表中，并带有打勾标志和一条横穿的横线（表示已完成）。
- 任务排序逻辑：支持按“创建时间”和“截止日期”排序（默认为按“创建时间”排序），MySQL 默认升序排序时，NULL 值会排在最前面，导致无日期的任务被误认为最紧急。因此我修改为先判断是否为 NULL（0或1），确保有日期的在前，无日期的在后，然后再按时间升序。
- 邮件提醒功能：用户可自定义“提前 X 分钟”提醒，后端定时任务每分钟扫描一次，当（当前时间 >= 截止时间 - 提前时间）时，发送邮件提醒给用户，并且将数据库 reminder_sent 字段置为 1，实现防重机制。

## 4. AI 使用说明
- 是否使用 AI 工具：使用了 Cursor
- 使用 AI 的环节：
    - 前端部分：前端大部分通过 AI 生成，比如页面绘制，交互逻辑，过渡动画等，后续只需替换调用的接口地址即可。
    - 后端部分：使用 AI 生成了 MyBatis Plus 的代码生成器配置类 (CodeGenerator)，节省了查阅文档的时间。
    - Bug定位与修复：比如模板引擎报错，因为这个模板引擎只是在代码生成的时候用到，所以 AI 推荐我设置作用域为 test，并且将 CodeGenerator 转移到 test 中。其他的错误则是类型不匹配、JSON 解析错误等问题，这些只需要给 AI 提供错误信息即可快速解决。
    - 文档初稿编写：通过 AI 提供了一份初稿，我在此基础上选择了一部分我觉得可行的放入文档中，其余的内容由我自己编写。

## 5. 运行与测试方式
- 本地运行方式（安装依赖、启动命令）。
  - 环境要求
    - JDK: 17+
    - Node.js: 16+
    - MySQL: 8.0
- 已测试过的环境：Windows10
- 已知问题与不足
  - 缺少 TODO 列表详情功能，否则如果描述太长，列表无法显示完全。
  - 缺少 TODO 列表的搜索以及修改功能，无法通过匹配关键字进行搜索，并且因为缺少修改功能，只能先删除后新增，比较麻烦。
  - 用的是本地数据库，也没有部署在云服务器，所以只能在本地使用，无法实现数据互通。
  - 定时任务的实现方式不够高效，全表扫描，导致性能问题。
  - 缺少用户系统，这样就不仅可以将邮件与用户绑定，还支持多用户，每个用户通过 ID 隔离 TODOList。

## 6. 总结与反思
- 如果有更多时间，你会如何改进？
  - 首先添加 TODO 列表详情、搜索和修改功能，提升用户体验。
  - 然后使用云服务器部署项目，实现数据互通。
  - 优化定时任务，将全表扫描改为基于索引的流式查询或引入 Redis 的 ZSet 做延迟队列。
  - 添加用户系统，支持多用户。
- 你觉得这个实现的最大亮点是什么？
  - 最大亮点是邮件提醒功能，通过定时任务和防重机制实现了提醒的精准推送。